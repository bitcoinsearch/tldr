<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - Potential vulnerability in Lightning backends: BOLT-11 "payment hash" does not commit to payment!</title>
  <updated>2023-07-17T02:44:07.574349+00:00</updated>
  <author>
    <name>Martin Habovštiak 2023-07-15 20:30:06+00:00</name>
  </author>
  <author>
    <name>David A. Harding  + 2023-07-12 20:04:19+00:00</name>
  </author>
  <author>
    <name>fiatjaf  + 2023-07-13 21:03:11+00:00</name>
  </author>
  <author>
    <name>callebtc  + 2023-07-06 07:22:59+00:00</name>
  </author>
  <author>
    <name>Rusty Russell  + 2023-07-06 07:10:42+00:00</name>
  </author>
  <author>
    <name>callebtc  + 2023-06-19 15:26:05+00:00</name>
  </author>
  <author>
    <name>Antoine Riard  + 2023-06-19 20:34:10+00:00</name>
  </author>
  <author>
    <name>Olaoluwa Osuntokun 2023-07-16 11:32:08+00:00</name>
  </author>
  <author>
    <name>David A. Harding  + 2023-07-12 20:04:19+00:00</name>
  </author>
  <author>
    <name>fiatjaf  + 2023-07-13 21:03:11+00:00</name>
  </author>
  <author>
    <name>callebtc  + 2023-07-06 07:22:59+00:00</name>
  </author>
  <author>
    <name>Rusty Russell  + 2023-07-06 07:10:42+00:00</name>
  </author>
  <author>
    <name>callebtc  + 2023-06-19 15:26:05+00:00</name>
  </author>
  <author>
    <name>Antoine Riard  + 2023-06-19 20:34:10+00:00</name>
  </author>
  <author>
    <name>Martin Habovštiak 2023-07-16 18:11:58+00:00</name>
  </author>
  <author>
    <name>David A. Harding  + 2023-07-12 20:04:19+00:00</name>
  </author>
  <author>
    <name>fiatjaf  + 2023-07-13 21:03:11+00:00</name>
  </author>
  <author>
    <name>callebtc  + 2023-07-06 07:22:59+00:00</name>
  </author>
  <author>
    <name>Rusty Russell  + 2023-07-06 07:10:42+00:00</name>
  </author>
  <author>
    <name>callebtc  + 2023-06-19 15:26:05+00:00</name>
  </author>
  <author>
    <name>Antoine Riard  + 2023-06-19 20:34:10+00:00</name>
  </author>
  <link href="lightning-dev/July_2023/004009_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/July_2023/004007_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/July_2023/004008_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/July_2023/004006_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/July_2023/004005_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/June_2023/003983_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/June_2023/003986_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/July_2023/004010_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/July_2023/004007_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/July_2023/004008_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/July_2023/004006_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/July_2023/004005_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/June_2023/003983_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/June_2023/003986_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/July_2023/004012_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/July_2023/004007_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/July_2023/004008_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/July_2023/004006_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/July_2023/004005_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/June_2023/003983_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <link href="lightning-dev/June_2023/003986_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.xml" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>2</id>
    <title>Combined summary - Potential vulnerability in Lightning backends: BOLT-11 "payment hash" does not commit to payment!</title>
    <updated>2023-07-17T02:44:07.574531+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-July/004009.html" rel="alternate"/>
    <summary>In recent discussions on the Lightning-dev mailing list, the topic of implementing self-payment support for Lightning Network (LN) node implementations has been raised. Currently, no LN node has this ability, which is seen as a significant limitation. The suggestion is to enable LN nodes to support self-payment of their own invoices, eliminating the need for separate short-circuit mechanisms like the one used in LNBits.The idea is that when a user requests a payment, the underlying LN implementation's standard `requestpayment` API would be called by platforms like LNBits. Similarly, when a user wants to review and pay an invoice, the `pay` API of the underlying implementation would be utilized. This approach simplifies the codebase of platforms like LNBits, reduces the need for frequent updates, and allows for easier adoption of new features.Implementing self-payment support could add complexity to LN implementations, but it is believed that the benefits outweigh the drawbacks, especially considering the potential adoption of platforms like LNBits by various services. By avoiding the duplication of payment processing logic in both the underlying implementation and account management software, the security and efficiency of the LN ecosystem can be improved.In another development, LNBits disclosed an exploit that allowed attackers to create fraudulent balances by exploiting a quirk in how invoices are handled internally. This issue has been addressed in the latest version of LNBits, and users are advised to update their systems. The team believes that similar exploits may be possible in other LN applications, particularly those related to custodial wallets, payment processors, and account management software. The attack involved inserting the payment hash of one payment into a different payment, creating a malicious invoice that tricks the backend into treating it as a legitimate payment. To mitigate such issues, backends should use unique "checking IDs" for internal payment lookups or implement additional checks to ensure invoice details have not been tampered with.This incident highlights the sophistication of LN-savvy attackers and the importance of implementing robust security measures in LN applications. It also emphasizes that the "payment hash" of an invoice should be referred to as a "preimage" hash, as it only commits to the preimage and not other payment details like amount or pubkey. Developers are urged to be aware of potential vulnerabilities and take appropriate measures to prevent similar attacks.In an email conversation, David A. Harding raises the question of whether LN node implementations should support self-payment of invoices. He suggests reaching out to the developers of these implementations to consider implementing this feature if they don't already have it. This could be a significant feature for custodial Lightning service providers, enhancing their capabilities. The lack of self-payment support in current LN nodes is seen as unfortunate, and its implementation is highly desirable.Overall, these discussions highlight the ongoing efforts to improve the functionality and security of the Lightning Network by implementing features like self-payment support and addressing vulnerabilities in invoice handling. Collaboration among developers and awareness of potential exploits are crucial for the growth and success of the LN ecosystem.</summary>
    <published>2023-07-15T20:30:06+00:00</published>
  </entry>
</feed>
