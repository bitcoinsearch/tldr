<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - bitcoind stops responding</title>
  <updated>2023-06-07T17:15:04.520673+00:00</updated>
  <author>
    <name>Jeff Garzik 2013-10-01 01:17:17</name>
  </author>
  <author>
    <name>Jeff Garzik 2013-10-01 01:26:59</name>
  </author>
  <author>
    <name>Olivier Langlois 2013-10-01 04:03:39</name>
  </author>
  <author>
    <name>slush 2013-10-01 08:58:05</name>
  </author>
  <author>
    <name>Jeff Garzik 2013-10-01 14:17:43</name>
  </author>
  <author>
    <name>Olivier Langlois 2013-10-02 03:20:53</name>
  </author>
  <author>
    <name>slush 2013-09-30 20:44:57</name>
  </author>
  <author>
    <name>Fatima Castiglione Maldonado 发 2013-09-30 22:00:14</name>
  </author>
  <author>
    <name>Jeff Garzik 2013-10-04 15:05:29</name>
  </author>
  <author>
    <name>Fatima Castiglione Maldonado 发 2013-10-01 00:05:33</name>
  </author>
  <author>
    <name>Jeff Garzik 2013-10-01 01:26:59</name>
  </author>
  <author>
    <name>Olivier Langlois 2013-10-01 07:10:18</name>
  </author>
  <author>
    <name>Gregory Maxwell 2013-09-30 22:08:01</name>
  </author>
  <author>
    <name>Jeff Garzik 2013-10-01 01:26:59</name>
  </author>
  <author>
    <name>slush 2013-09-30 20:44:57</name>
  </author>
  <author>
    <name>Fatima Castiglione Maldonado 发 2013-09-30 22:00:14</name>
  </author>
  <author>
    <name>Chris Double 2013-10-01 00:20:40</name>
  </author>
  <author>
    <name>Olivier Langlois 2013-10-01 07:10:18</name>
  </author>
  <author>
    <name>Warren Togami Jr. 2013-09-30 21:01:36</name>
  </author>
  <author>
    <name>Gregory Maxwell 2013-09-30 22:08:01</name>
  </author>
  <author>
    <name>Olivier Langlois 2013-10-02 03:20:53</name>
  </author>
  <author>
    <name>Gavin Andresen 2013-10-04 06:22:34</name>
  </author>
  <author>
    <name>slush 2013-09-30 20:44:57</name>
  </author>
  <author>
    <name>Fatima Castiglione Maldonado 发 2013-09-30 22:00:14</name>
  </author>
  <author>
    <name>Gregory Maxwell 2013-09-30 22:08:01</name>
  </author>
  <author>
    <name>Jeff Garzik 2013-10-04 15:05:29</name>
  </author>
  <author>
    <name>Fatima Castiglione Maldonado 发 2013-10-01 00:05:33</name>
  </author>
  <author>
    <name>Chris Double 2013-10-01 00:20:40</name>
  </author>
  <author>
    <name>Jeff Garzik 2013-10-01 01:17:17</name>
  </author>
  <author>
    <name>Olivier Langlois 2013-10-01 04:03:39</name>
  </author>
  <author>
    <name>Gavin Andresen 2013-10-04 06:22:34</name>
  </author>
  <author>
    <name>Fatima Castiglione Maldonado 发 2013-10-01 00:05:33</name>
  </author>
  <author>
    <name>Olivier Langlois 2013-10-04 03:52:18</name>
  </author>
  <author>
    <name>Gavin Andresen 2013-10-04 06:22:34</name>
  </author>
  <author>
    <name>Chris Double 2013-10-01 00:20:40</name>
  </author>
  <author>
    <name>Jeff Garzik 2013-10-01 01:17:17</name>
  </author>
  <author>
    <name>Olivier Langlois 2013-10-01 04:03:39</name>
  </author>
  <author>
    <name>slush 2013-10-01 08:58:05</name>
  </author>
  <author>
    <name>Jeff Garzik 2013-10-01 14:17:43</name>
  </author>
  <author>
    <name>Olivier Langlois 2013-10-04 03:52:18</name>
  </author>
  <author>
    <name>Jeff Garzik 2013-10-04 15:05:29</name>
  </author>
  <author>
    <name>Warren Togami Jr. 2013-09-30 21:01:36</name>
  </author>
  <author>
    <name>Olivier Langlois 2013-10-01 07:10:18</name>
  </author>
  <author>
    <name>slush 2013-10-01 08:58:05</name>
  </author>
  <author>
    <name>Jeff Garzik 2013-10-01 14:17:43</name>
  </author>
  <author>
    <name>Olivier Langlois 2013-10-02 03:20:53</name>
  </author>
  <author>
    <name>Olivier Langlois 2013-10-04 03:52:18</name>
  </author>
  <author>
    <name>Warren Togami Jr. 2013-09-30 21:01:36</name>
  </author>
  <link href="bitcoin-dev/Oct_2013/003307_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003308_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003309_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003311_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003312_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003315_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Sept_2013/003301_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Sept_2013/003303_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003337_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003305_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003308_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003310_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Sept_2013/003304_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003308_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Sept_2013/003301_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Sept_2013/003303_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003306_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003310_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Sept_2013/003302_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Sept_2013/003304_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003315_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003324_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Sept_2013/003301_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Sept_2013/003303_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Sept_2013/003304_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003337_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003305_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003306_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003307_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003309_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003324_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003305_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003323_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003324_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003306_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003307_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003309_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003311_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003312_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003323_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003337_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Sept_2013/003302_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003310_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003311_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003312_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003315_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Oct_2013/003323_bitcoind-stops-responding.xml" rel="alternate"/>
  <link href="bitcoin-dev/Sept_2013/003302_bitcoind-stops-responding.xml" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>2</id>
    <title>Combined summary - bitcoind stops responding</title>
    <updated>2023-06-07T17:15:04.521673+00:00</updated>
    <link href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2013-October/003307.html" rel="alternate"/>
    <summary>There have been ongoing issues with the Bitcoin daemon (bitcoind) not responding to RPC calls, particularly when using `getinfo` and `sendToAddress` calls too frequently. This problem has been observed across various backends, indicating that it isn't specific to one node. In September 2013, multiple users reported an issue with bitcoind not responding to RPC calls without any other suspicious activity in the logs. A workaround for this issue was found on GitHub, where it was suggested that building with more RPC threads can resolve the issue.It was noted that 0.8.2 was the first version of Bitcoin to support RPC keepalive, and with the four RPC thread limit, four keepalive connections would exhaust all four and prevent further connections. The exact cause of the problem is unknown, but timestamps in traces have been suggested as a useful addition for tracking problems. Possible causes of the problem include lock contention issues with other threads and hitting the maximum-of-4-keepalive-requests limit. Workarounds such as building with more RPC threads and running with `-rpcthreads=11` were suggested, as well as modifications to the rpc code to make it smarter.In one case, the `getinfo` RPC function takes more than two seconds to return due to receiving a block, committing 1015 changed transactions to the coin database, and setting a new best chain. During this process, `ThreadFlushWalletDB` locks the wallet database, which causes `getinfo` to wait until it completes to finish calling `GetOldestKeyPoolTime()`. Suggestions to reduce the time taken by `getinfo` include closing and reopening the database asynchronously rather than synchronously, removing unnecessary options from BDB, and experimenting with an optional boolean parameter for `getinfo` that could skip gathering information that may prolong the call.Additionally, discussions revolved around processes calling `getinfo` frequently and how that can cause issues. One process called `getinfo` every second as a fallback to possibly misconfigured blocknotify, and it also called `getblocktemplate` every 30 seconds. Another process called `getinfo` once a minute to check if bitcoind is working. If it did not receive a response in a minute, the process would kill bitcoind and restart it.The author suspects that `LOCK2(cs_main, pwalletMain-&gt;cs_wallet)` is causing lock contention with other threads. They modified `bitcoinrpc.cpp` to measure how long it takes to acquire the locks and found that it took over 6 seconds in some cases. Jeff Garzik suggested that there are valid reasons for locks being held for long periods during random network events, and Olivier Langlois responded with more details about the network activity during a test where CTxMemPool::accept() was called while the rpc thread was between jreq.parse() and tableRPC.execute(). In October 2013, Gavin Andresen suggested that the RPC code in Bitcoin should be smarter and suggested a simple patch which would make the last rpc thread ignore keepalive and always disconnect. Jeff Garzik tried a multi-threaded approach writing an entire boost::asio skeleton JSON-RPC HTTP server, but the goal is to make the code truly async I/O, and he believes that a single thread with async I/O is likely sufficient for even heavy uses of RPC, since today it all goes through a big lock anyway.</summary>
    <published>2013-10-01T01:17:17+00:00</published>
  </entry>
</feed>
